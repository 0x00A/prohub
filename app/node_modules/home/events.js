var dal = require('dal/project');
//
// test the first load of json data to determine if we want this
// module's handler to be executed.
//
exports.test = function(stream, data) {
  if (data.page && data.page == 'home') return true;
};

//
// gives you the stream and the first load of json data.
// you can continue to listen, once or multiple times (on, pipe).
//
exports.handler = function(stream, data) {

  if (data.addProject) {
    dal.addProject(data.addProject, function(err) {
      if (err) return stream.write({ addProject: err });
      stream.write({ addProject: 'Project Added' });
    });
  }

  //
  // get some more data from the client
  //
  //stream.once('json', function(data) {

    // 
    // cool, got it.
    //
  //});
};

