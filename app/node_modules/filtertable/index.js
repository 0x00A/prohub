var dom = require('dom-events');
var insertcss = require('insert-css');
var template = require('./templates/index.jade');
var forEach = Array.prototype.forEach;

module.exports = function(locals, cb) {

  insertcss(require('./styles/index.styl'));

  var repoUL = document.querySelector('ul.repos');
  repoUL.innerHTML = template({ data: locals });
  var repos = repoUL.querySelectorAll('.repo');

  forEach.call(repos, function(el) {
    dom.on(el, 'click', cb);
  });
};

