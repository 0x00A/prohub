var cookie = require('cookie');

module.exports = {
  parse: function(cookiesString) {
    var cookies = cookie.parse(cookiesString);

    var token = null;
    if ('string' === typeof cookies.token) {
      try {
        var token = JSON.parse(cookies.token);
      } catch (e) {}

      if (null !== token) {
        if ('string' === typeof token.error) {
          console.log('Token error: ', token);
        }

        if ('string' !== typeof token.access_token) {
          token = null;
        }
      }
    }

    return token;
  }
};

