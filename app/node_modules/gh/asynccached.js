var memoizeAsync = require('memoizeasync');

function getCacheConfig(seconds) {
  return {
    maxAge: seconds * 1000, // TTL
    max: 100                // LRU max count
  };
}

module.exports = function(fn, seconds) {
  if (seconds !== (seconds >>> 0)) {
    throw new Error('cache time required');
  }

  if (0 === seconds) {
    return fn;
  }

  return memoizeAsync(fn, getCacheConfig(seconds));
};

